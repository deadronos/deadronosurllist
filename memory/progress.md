# Progress Log

- 2025-10-09: Initiated TASK001 to create a Radix-themed public welcome page backed by a seeded public collection.
- 2025-10-09: Added Radix UI dependency and wrapped the application layout with the Radix Theme provider.
- 2025-10-09: Implemented a public tRPC collection query and seeded the mock database with curated default links.
- 2025-10-09: Rebuilt the landing page UI with Radix components to highlight the public collection and sign-in flows.
- 2025-10-09: Extended unit tests for collection and link routers; `npm run test` passes.
- 2025-10-09: Established Memory Bank baseline with project brief, product context, system patterns, tech context, and expanded requirements.
- 2025-10-09: Started TASK002 to detect mock OAuth credentials and stabilise the sign-in experience.
- 2025-10-09: Completed TASK002 by adding provider diagnostics, a resilient `/signin` page, and helper unit tests.
- 2025-10-09: Initiated TASK003 to add a persistent home navigation control across application pages.
- 2025-10-09: Completed TASK003 by embedding a global home button in the root layout and verifying navigation across routes.
- 2025-10-09: Started TASK004 to extend home navigation onto error and not-found pages.
- 2025-10-09: Completed TASK004 by introducing Radix-styled error and 404 pages with home navigation.
- 2025-10-10: Completed TASK005 by hardening type safety across UI, routers, auth providers, mock DB, and tests; `npm run typecheck` and targeted Vitest suites now pass cleanly.
- 2025-10-10: Completed TASK007 by tightening post router typing, leveraging Prisma `Post` models directly, and verifying with lint/typecheck/postRouter Vitest plus build (Prisma engine warnings acknowledged on Windows mock environment).
- 2025-10-10: Initiated TASK006 to type the database context, routers, and tests so `npm run lint` passes without unsafe-`any` diagnostics.
- 2025-10-10: Completed TASK006 by introducing a typed `LinkListDatabase`, updating routers/tests/UI, and confirming `npm run lint` plus `npx vitest --run collectionRouter.spec.ts postRouter.spec.ts` succeed.
- 2025-10-10: Implemented database URL resolution fallback so preview deployments gracefully degrade to the mock DB when provided Prisma strings lack a postgres protocol; verified with lint, Vitest, and full Next.js build.
- 2025-10-10: Added a custom NextAuth error page with home navigation and retry actions, wired via `pages.error`, and confirmed with lint, Vitest, and production build.
- 2025-10-10: Guarded NextAuth route handlers to redirect to the error page when the database or providers are unavailable, eliminating Vercel UnknownAction noise; validated with lint, Vitest, and production build.
- 2025-10-10: Implemented JWT/session callbacks in the NextAuth config so `session.user.id` persists even when operating statelessly, then reran `npm run test` to confirm the router suites stay green.
- 2025-10-10: Added a dedicated Vitest for the NextAuth callbacks, stubbing Next providers to prove `session.user.id` remains present when the Prisma adapter is disabled and the mock database is in use.
- 2025-10-10: Hardened the `/api/auth/[...nextauth]` handler to short-circuit HEAD/OPTIONS probes before they hit NextAuth, suppressing the `UnknownAction` noise and documenting the suppressed request in logs; revalidated with `npm run typecheck` and `npm run test`.
- 2025-10-11: Unblocked `npm run lint` by exporting typed NextAuth helpers, adjusting the ESLint project config, and cleaning consumer calls so `authDiagnostics`/`auth()` stay fully typed; re-ran `npm run lint` and `npm run test -- --run`.
- 2025-10-11: Started TASK010 to design the public collections catalog update and captured requirements plus architectural notes in the memory bank.
- 2025-10-11: Implemented TASK010 catalog work by adding a `getPublicCatalog` tRPC procedure, updating the landing page with a searchable public collections grid, and verified linting via `npm run lint`.
- 2025-10-11: Expanded TASK010 to deliver a typed catalog contract with pagination, load-more UI, search filtering, and Vitest coverage for link trimming and cursor handling; reran formatter, lint, typecheck, and unit tests.
- 2025-10-11: Completed TASK011 by adding link router authorization regression tests and NextAuth callback fallback coverage; ran `npm run format:check`, `npm run lint`, and `npm run test` (format check reports existing formatting drift).
- 2025-10-11: Completed TASK013 by retyping `vitest.config.ts`, gating the Playwright provider behind `VITEST_BROWSER`, and confirming `npm run typecheck`, `npm run lint:fix`, `npm run test`, and `npm run format:write` all succeed.
